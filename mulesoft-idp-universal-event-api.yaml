asyncapi: 2.6.0
id: urn:example:com:smartylighting:streetlights:server
info:
  title: MuleSoft IDP Universal üåê Event API
  version: 1.0.0
  description: |-

    https://v2.asyncapi.com/docs/reference/specification/v2.6.0

    https://github.com/asyncapi/bindings/blob/1a62858ef52dd968f4d5018245ea9b4ff411666f/anypointmq/README.md?plain=1#L5

    https://github.com/asyncapi/spec/blob/v2.6.0/spec/asyncapi.md

    https://github.com/asyncapi/bindings/blob/1a62858ef52dd968f4d5018245ea9b4ff411666f/anypointmq/README.md?plain=1#L5

  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0
  termsOfService: https://asyncapi.org/terms/
  contact:
    name: API Support
    url: https://www.asyncapi.org/support
    email: support@asyncapi.org

defaultContentType: application/json

servers:
  anypoint-prd:
    url: https:://your_MQ_server_URL_here
    description: Anypoint MQ broker PRD Env
    protocol: anypointmq
    protocolVersion: v1
    tags:
      - name: env:production
        description: Anypoint MQ broker for development, in the US East (N. Virginia) runtime plane under management of the US control plane.

#    security:                  # Ignored for MQ
#      - oauthProd: []          # Ignored for MQ
#    bindings:                  # Ignored for MQ & will raise an Error in Designer
#      anypointmq:              # Ignored for MQ
#        bindingVersion: 0.1.0  # Ignored for MQ

  anypoint-dev:
    url: https://your_MQ_server_URL_here
    description: Anypoint MQ broker DEV Env
    protocol: anypointmq
    protocolVersion: v1
    tags:
      - name: env:production
        description: Anypoint MQ broker for development, in the US East (N. Virginia) runtime plane under management of the US control plane.














channels:
  order-placed:
    description: new orders channel
    servers:
      - anypoint-prd
    publish:
      operationId: listen-order-placed
      description: listen for new order events
      summary: Order Placed Event
      message:
        $ref: '#/components/messages/OrderPlaced'
    subscribe:
      operationId: publish-order-placed
      description: publish new order events
      summary: Order Placed Event
      message:
        $ref: '#/components/messages/OrderPlaced'
  

components:
  messages:
    OrderPlaced:
      payload:
        type: object
        properties:
          orderId:
            type: string
          customerName:
            type: string
          email:
            type: string
          items:
            type: array
            items:
              type: object
              properties:
                productId:
                  type: string
                productName:
                  type: string
                quantity:
                  type: integer
                price:
                  type: number

  securitySchemes:
    oauthProd:
      type: oauth2
      flows:
        clientCredentials:
          tokenUrl: 'https://mq-us-east-1.anypoint.mulesoft.com/api/v1/authorize'
          scopes: {}